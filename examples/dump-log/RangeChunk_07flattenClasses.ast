AST dump for RangeChunk after pass flattenClasses.
Module use list: ChapelStandard Math 

{
  type RemElems[273786] def Thru[273780]:RemElems[273786] def Pack[273782]:RemElems[273786] def Mod[273784]:RemElems[273786]
  function chunks[273792](arg r[273797] :
  (273795 call range[240](?) ?[227]), arg numChunks[273801] :
  integral[159](?), arg remPol[273806] :
  RemElems[273786] =
  Thru[273780]) : _unknown[42] "iterator fn" "no return value for void"
  {
    (273812 call compilerAssert(273813 call ==(273816 call . r[273797] c"bounds") both[107114]) "chunks() requires a bounded range, got "(273826 call :(273829 'typeof' r[273797]) string[244]))
    {
      unknown _indexOfInterest[273881] "an _indexOfInterest or chpl__followIdx variable" "temp"
      unknown _iterator[273882] "expr temp" "temp"
      (273891 'move' _iterator[273882](273889 call _getIterator(273839 call chunksOrder r[273797] numChunks[273801] remPol[273806])))
      Defer
      {
        {
          (273919 call _freeIterator _iterator[273882])
        }
      }
      { scopeless type
        (273896 'move' _indexOfInterest[273881](273893 call iteratorIndex _iterator[273882]))
      }
      ForLoop[273883] order-independent
      {
        (273901 call _check_tuple_var_decl _indexOfInterest[273881] 2)
        unknown startOrder[273832] "index var" "insert auto destroy"
        (273908 'move' startOrder[273832](273905 call _indexOfInterest[273881] 0))
        unknown endOrder[273834] "index var" "insert auto destroy"
        (273914 'move' endOrder[273834](273911 call _indexOfInterest[273881] 1))
        {
          const start[273845] "const"(273850 call(273847 call . r[273797] c"orderToIndex") startOrder[273832])
          (273853 'end of statement')
          const end[273855] "const"(273860 call(273857 call . r[273797] c"orderToIndex") endOrder[273834])
          (273863 'end of statement')
          (273864 yield(273865 call :(273867 call chpl_by(273871 call chpl_build_bounded_range start[273845] end[273855])(273874 call . r[273797] c"stride"))(273878 'typeof' r[273797])))
        }
        label _continueLabel[273886]
        _indexOfInterest[273881]
        _iterator[273882]
      }
      label _breakLabel[273887]
    }
  }
  function chunk[273928](arg r[273933] :
  (273931 call range[240](?) ?[227]), arg numChunks[273937] :
  integral[159](?), arg idx[273941] :
  integral[159](?), arg remPol[273946] :
  RemElems[273786] =
  Thru[273780]) : _unknown[42]
  {
    (273952 call compilerAssert(273953 call ==(273956 call . r[273933] c"bounds") both[107114]) "chunk() requires a bounded range, got "(273966 call :(273969 'typeof' r[273933]) string[244]))
    const tmp[273982] "const" "temp"(273977 call chunkOrder r[273933] numChunks[273937] idx[273941] remPol[273946])
    (273989 call _check_tuple_var_decl tmp[273982] 2)
    const startOrder[273972] "const"(273983 call tmp[273982] 0)
    const endOrder[273974] "const"(273986 call tmp[273982] 1)
    (273994 'end of statement')
    const start[273996] "const"(274001 call(273998 call . r[273933] c"orderToIndex") startOrder[273972])
    (274004 'end of statement')
    const end[274006] "const"(274011 call(274008 call . r[273933] c"orderToIndex") endOrder[273974])
    (274014 'end of statement')
    (274015 return(274016 call :(274018 call chpl_by(274022 call chpl_build_bounded_range start[273996] end[274006])(274025 call . r[273933] c"stride"))(274029 'typeof' r[273933])))
  }
  function blockCyclicChunks[274032](arg r[274037] :
  (274035 call range[240](?) ?[227]), arg blockSize[274041] :
  integral[159](?), arg tid[274045] :
  integral[159](?), arg nTasks[274049] :
  integral[159](?)) : _unknown[42] "iterator fn" "no return value for void"
  {
    (274054 call compilerAssert(274055 call ==(274058 call . r[274037] c"bounds") both[107114]) "blockCyclicChunks() requires a bounded range, got "(274068 call :(274071 'typeof' r[274037]) string[244]))
    if(274088 call _cond_test(274084 call >= tid[274045] nTasks[274049]))
    {
      (274074 call halt(274075 call + "Parameter tid must be < nTasks " "because blocks are indexed from 0..nTasks-1"))
    }
    if(274103 call _cond_test(274099 call <= blockSize[274041] 0))
    {
      (274094 call halt "blockSize must a positive number")
    }
    if(274118 call _cond_test(274114 call <= nTasks[274049] 0))
    {
      (274109 call halt "nTasks must be a positive number")
    }
    unknown rangeStride[274124](274126 call . r[274037] c"stride")
    (274130 'end of statement')
    unknown blockStride[274132](274133 call * blockSize[274041] rangeStride[274124])
    (274138 'end of statement')
    unknown low[274140](274142 call . r[274037] c"lowBound")
    (274146 'end of statement')
    unknown high[274148](274150 call . r[274037] c"highBound")
    (274154 'end of statement')
    unknown firstBlockStart[274156](274157 call +(274172 IfExpr (274163 call(274160 call . r[274037] c"hasPositiveStride")) then
    { scopeless
      (274165 call . r[274037] c"lowBound")
    } else
    { scopeless
      (274169 call . r[274037] c"highBound")
    } )(274175 call * blockStride[274132] tid[274045]))
    (274180 'end of statement')
    if(274199 call _cond_test(274183 call ||(274185 call > firstBlockStart[274156](274189 call . r[274037] c"highBound"))(274192 call < firstBlockStart[274156](274196 call . r[274037] c"lowBound"))))
    {
      (274181 return _void[46])
    }
    unknown strideToNextBlock[274205](274206 call * blockStride[274132] nTasks[274049])
    (274211 'end of statement')
    if(274379 call _cond_test(274378 call(274375 call . r[274037] c"hasPositiveStride")))
    {
      {
        unknown _indexOfInterest[274252] "an _indexOfInterest or chpl__followIdx variable" "temp"
        unknown _iterator[274253] "expr temp" "temp"
        (274262 'move' _iterator[274253](274260 call _getIterator(274271 call chpl_direct_strided_range_iter firstBlockStart[274156] high[274148] strideToNextBlock[274205])))
        Defer
        {
          {
            (274286 call _freeIterator _iterator[274253])
          }
        }
        { scopeless type
          (274276 'move' _indexOfInterest[274252](274273 call iteratorIndex _iterator[274253]))
        }
        ForLoop[274254]
        {
          unknown blockStart[274213] "index var" "insert auto destroy"
          (274281 'move' blockStart[274213] _indexOfInterest[274252])
          {
            unknown blockEnd[274224](274226 call min high[274148](274228 call -(274230 call + blockStart[274213] blockStride[274132]) 1))
            (274236 'end of statement')
            (274237 yield(274238 call :(274240 call chpl_by(274244 call chpl_build_bounded_range blockStart[274213] blockEnd[274224])(274247 call . r[274037] c"stride"))(274251 'typeof' r[274037])))
          }
          label _continueLabel[274257]
          _indexOfInterest[274252]
          _iterator[274253]
        }
        label _breakLabel[274258]
      }
    }
    {
      {
        unknown _indexOfInterest[274333] "an _indexOfInterest or chpl__followIdx variable" "temp"
        unknown _iterator[274334] "expr temp" "temp"
        (274343 'move' _iterator[274334](274341 call _getIterator(274352 call chpl_direct_strided_range_iter low[274140] firstBlockStart[274156] strideToNextBlock[274205])))
        Defer
        {
          {
            (274367 call _freeIterator _iterator[274334])
          }
        }
        { scopeless type
          (274357 'move' _indexOfInterest[274333](274354 call iteratorIndex _iterator[274334]))
        }
        ForLoop[274335]
        {
          unknown blockEnd[274294] "index var" "insert auto destroy"
          (274362 'move' blockEnd[274294] _indexOfInterest[274333])
          {
            unknown blockStart[274305](274307 call max low[274140](274309 call +(274311 call + blockEnd[274294] blockStride[274132]) 1))
            (274317 'end of statement')
            (274318 yield(274319 call :(274321 call chpl_by(274325 call chpl_build_bounded_range blockStart[274305] blockEnd[274294])(274328 call . r[274037] c"stride"))(274332 'typeof' r[274037])))
          }
          label _continueLabel[274338]
          _indexOfInterest[274333]
          _iterator[274334]
        }
        label _breakLabel[274339]
      }
    }
  }
  function chunksOrder[274385](arg r[274396] :
  (274388 call range[240](?) unknown RT[274389] both[107114] ?[227]), arg numChunks[274400] :
  integral[159](?), arg remPol[274405] :
  RemElems[273786] =
  Thru[273780]) : _unknown[42] "iterator fn" "no return value for void"
  {
    if(274431 call _cond_test(274416 call ||(274418 call ==(274424 call(274421 call . r[274396] c"sizeAs") RT[274389]) 0)(274427 call <= numChunks[274400] 0)))
    {
      (274414 return _void[46])
    }
    const nElems[274437] "const"(274442 call(274439 call . r[274396] c"sizeAs") RT[274389])
    (274445 'end of statement')
    unknown nChunks[274447](274448 call :(274451 call min numChunks[274400] nElems[274437]) RT[274389])
    (274456 'end of statement')
    unknown type_tmp[274464] "temp" "type variable" RT[274389]
    unknown chunkSize[274463] type_tmp[274464]
    unknown rem[274459] type_tmp[274464]
    (274469 'end of statement')
    {
      unknown tmp[274530] "expr temp" "maybe param" "maybe type" "temp"
      (274532 'move' tmp[274530] remPol[274405])
      if(274537 call _cond_test(274534 call == tmp[274530] Pack[273782]))
      {
        (274476 call = chunkSize[274463](274479 call / nElems[274437] nChunks[274447]))
        if(274502 call _cond_test(274495 call !=(274497 call * chunkSize[274463] nChunks[274447]) nElems[274437]))
        {
          (274484 call += chunkSize[274463] 1)
          (274488 call = nChunks[274447](274492 call divCeil nElems[274437] chunkSize[274463]))
        }
      }
      {
        if(274543 call _cond_test(274540 call == tmp[274530] Mod[273784]))
        {
          (274511 call = chunkSize[274463](274514 call / nElems[274437] nChunks[274447]))
          (274518 call = rem[274459](274521 call - nElems[274437](274524 call * chunkSize[274463] nChunks[274447])))
        }
      }
    }
    {
      unknown _indexOfInterest[274648] "an _indexOfInterest or chpl__followIdx variable" "temp"
      unknown _iterator[274649] "expr temp" "temp"
      (274658 'move' _iterator[274649](274656 call _getIterator(274664 call chpl_direct_range_iter 0(274662 call chpl__nudgeHighBound nChunks[274447]))))
      Defer
      {
        {
          (274679 call _freeIterator _iterator[274649])
        }
      }
      { scopeless type
        (274669 'move' _indexOfInterest[274648](274666 call iteratorIndex _iterator[274649]))
      }
      ForLoop[274650] order-independent
      {
        unknown i[274547] "index var" "insert auto destroy"
        (274674 'move' i[274547] _indexOfInterest[274648])
        {
          unknown chunk[274557](274558 call * 2 RT[274389])
          (274563 'end of statement')
          {
            unknown tmp[274620] "expr temp" "maybe param" "maybe type" "temp"
            (274622 'move' tmp[274620] remPol[274405])
            if(274627 call _cond_test(274624 call == tmp[274620] Thru[273780]))
            {
              (274569 call = chunk[274557](274573 call chunkOrderThru nElems[274437] nChunks[274447] i[274547]))
            }
            {
              if(274633 call _cond_test(274630 call == tmp[274620] Pack[273782]))
              {
                (274583 call = chunk[274557](274587 call chunkOrderPack chunkSize[274463] nElems[274437] i[274547]))
              }
              {
                if(274640 call _cond_test(274637 call == tmp[274620] Mod[273784]))
                {
                  (274597 call = chunk[274557](274601 call chunkOrderMod chunkSize[274463] rem[274459] nElems[274437] nChunks[274447] i[274547]))
                }
                {
                  (274614 call halt "RangeChunk: unknown RemElems in chunksOrder")
                }
              }
            }
          }
          (274644 yield chunk[274557])
        }
        label _continueLabel[274653]
        _indexOfInterest[274648]
        _iterator[274649]
      }
      label _breakLabel[274654]
    }
  }
  { scopeless type
    (274409 call * 2 RT[274389])
  }
  function chunkOrder[274689](arg r[274700] :
  (274692 call range[240](?) unknown RT[274693] both[107114] ?[227]), arg numChunks[274704] :
  integral[159](?), arg idx[274708] :
  integral[159](?), arg remPol[274713] :
  RemElems[273786] =
  Thru[273780]) : _unknown[42]
  {
    if(274762 call _cond_test(274735 call ||(274737 call ||(274739 call ||(274741 call ==(274747 call(274744 call . r[274700] c"sizeAs") RT[274693]) 0)(274750 call <= numChunks[274704] 0))(274754 call < idx[274708] 0))(274758 call >= idx[274708] numChunks[274704])))
    {
      (274722 return(274732 call _build_tuple(274724 call : 1 RT[274693])(274728 call : 0 RT[274693])))
    }
    const nElems[274768] "const"(274773 call(274770 call . r[274700] c"sizeAs") RT[274693])
    (274776 'end of statement')
    const nChunks[274778] "const"(274779 call :(274782 call min numChunks[274704] nElems[274768]) RT[274693])
    (274787 'end of statement')
    const i[274789] "const"(274790 call : idx[274708] RT[274693])
    (274795 'end of statement')
    {
      unknown tmp[274887] "expr temp" "maybe param" "maybe type" "temp"
      (274889 'move' tmp[274887] remPol[274713])
      if(274894 call _cond_test(274891 call == tmp[274887] Thru[273780]))
      {
        (274802 return(274804 call chunkOrderThru nElems[274768] nChunks[274778] i[274789]))
      }
      {
        if(274900 call _cond_test(274897 call == tmp[274887] Pack[273782]))
        {
          unknown chunkSize[274814](274815 call / nElems[274768] nChunks[274778])
          (274820 'end of statement')
          if(274833 call _cond_test(274826 call !=(274828 call * chunkSize[274814] nChunks[274778]) nElems[274768]))
          {
            (274821 call += chunkSize[274814] 1)
          }
          (274838 return(274840 call chunkOrderPack chunkSize[274814] nElems[274768] i[274789]))
        }
        {
          if(274907 call _cond_test(274904 call == tmp[274887] Mod[273784]))
          {
            const chunkSize[274850] "const"(274851 call / nElems[274768] nChunks[274778])
            (274856 'end of statement')
            const rem[274858] "const"(274859 call - nElems[274768](274862 call * chunkSize[274850] nChunks[274778]))
            (274867 'end of statement')
            (274868 return(274870 call chunkOrderMod chunkSize[274850] rem[274858] nElems[274768] nChunks[274778] i[274789]))
          }
          {
            (274881 call halt "RangeChunk: unknown RemElems in chunkOrder")
          }
        }
      }
    }
  }
  { scopeless type
    (274717 call * 2 RT[274693])
  }
  function chunkOrderThru[274914](arg nElems[274918] :
  unknown I[274916], arg nChunks[274922] :
  I[274916], arg i[274926] :
  I[274916]) : _unknown[42] "private"
  {
    const m[274936] "const"(274937 call * nElems[274918] i[274926])
    (274942 'end of statement')
    const start[274944] "const"(274957 IfExpr (274945 call == i[274926] 0) then
    { scopeless
      (274949 call : 0 I[274916])
    } else
    { scopeless
      (274954 call divCeil m[274936] nChunks[274922])
    } )
    (274961 'end of statement')
    const end[274963] "const"(274985 IfExpr (274964 call == i[274926](274967 call - nChunks[274922] 1)) then
    { scopeless
      (274971 call - nElems[274918] 1)
    } else
    { scopeless
      (274975 call -(274978 call divCeil(274979 call + m[274936] nElems[274918]) nChunks[274922]) 1)
    } )
    (274989 'end of statement')
    (274990 return(274994 call _build_tuple start[274944] end[274963]))
  }
  { scopeless type
    (274932 call _build_tuple I[274916] I[274916])
  }
  function chunkOrderPack[274999](arg chunkSize[275003] :
  unknown I[275001], arg nElems[275007] :
  I[275001], arg i[275011] :
  I[275001]) : _unknown[42] "private"
  {
    const start[275021] "const"(275022 call * chunkSize[275003] i[275011])
    (275027 'end of statement')
    if(275045 call _cond_test(275041 call >= start[275021] nElems[275007]))
    {
      (275028 return(275038 call _build_tuple(275030 call : 1 I[275001])(275034 call : 0 I[275001])))
    }
    unknown end[275051](275052 call -(275054 call + start[275021] chunkSize[275003]) 1)
    (275060 'end of statement')
    if(275073 call _cond_test(275069 call >= end[275051] nElems[275007]))
    {
      (275061 call = end[275051](275064 call - nElems[275007] 1))
    }
    (275078 return(275082 call _build_tuple start[275021] end[275051]))
  }
  { scopeless type
    (275017 call _build_tuple I[275001] I[275001])
  }
  function chunkOrderMod[275087](arg chunkSize[275091] :
  unknown I[275089], arg rem[275095] :
  I[275089], arg nElems[275099] :
  I[275089], arg nChunks[275103] :
  I[275089], arg i[275107] :
  I[275089]) : _unknown[42] "private"
  {
    unknown type_tmp[275123] "temp" "type variable" I[275089]
    unknown start[275122] type_tmp[275123]
    unknown end[275118] type_tmp[275123]
    (275128 'end of statement')
    if(275175 call _cond_test(275171 call < i[275107] rem[275095]))
    {
      (275130 call = start[275122](275133 call * i[275107](275136 call + chunkSize[275091] 1)))
      (275140 call = end[275118](275143 call + start[275122] chunkSize[275091]))
    }
    {
      (275148 call = start[275122](275151 call - nElems[275099](275154 call *(275156 call - nChunks[275103] i[275107]) chunkSize[275091])))
      (275161 call = end[275118](275164 call -(275166 call + start[275122] chunkSize[275091]) 1))
    }
    (275179 return(275183 call _build_tuple start[275122] end[275118]))
  }
  { scopeless type
    (275113 call _build_tuple I[275089] I[275089])
  }
  (396939 'used modules list'(387054 'use' ChapelStandard[315387])(273777 'use' Math[10521])(273790 'use' RemElems[273786]))
}